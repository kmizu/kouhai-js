# あざとい後輩女子にプログラミング言語の作り方を教えて欲しいと言われたんだけど - プロット詳細

## 基本設定

### 登場人物

**嵐山隆弘（あらしやまたかひろ）**
- 高校2年生（17歳）。プログラミング言語研究者の卵。
- 性格：温厚で真面目。一度探求を始めると深く没頭する。
- **特性**: 世間知らずなのではなく、知的好奇心が専門分野に極端に偏っている。一般的な常識は備えているが、流行の音楽や芸能人の話題などには関心が薄く、同級生たちの雑談の輪に入れないことも。そのことに内心、少しの疎外感や、自分の興味の偏りに対するちょっとした悩みを感じている。
- 弱点：美久の真っ直ぐな好意や「お願い」に弱い。
- 特技：難解な概念を、本質を捉えたシンプルな言葉で説明すること。

**河内美久（かわちみく）**
- 高校1年生（16歳）。隆弘の隣の部屋に住む幼馴染。
- 性格：明るく積極的。コミュニケーション能力が高い。
- **コンプレックス**: 天才である隆弘の隣にいることに、嬉しさと同時に焦りやコンプレックスを感じている。
- **あざとさ**: 彼女の「あざとい」言動は、隆弘との距離を縮めたい、彼の特別な存在になりたいという切実な想いの裏返しであり、彼女なりの不器用なアプローチ。
- 将来の夢：隆弘と一緒に何かを創り上げること。

### 舞台設定
- 京都市内の進学校。
- 隆弘の自室（二人の開発拠点）。
- 学校の図書室や空き教室。

## 物語のテーマ
「完璧じゃない二人が、不完全な言語（＝対話の手段）を作りながら、お互いの世界を広げ、欠けた部分を埋め合っていく物語」

## 物語の流れ

### 第1部：契約と始まりのS式（1〜10話）
美久が「プログラミング言語を作りたい」と持ちかける。隆弘は、流行りのゲームや音楽の話には全くついていけない自分が、こんな地味な作業で彼女を退屈させないか不安に思う。しかし、美久の瞳の真剣さに押され、「最後まで付き合うこと」を条件に引き受ける。彼女が言語作成を望んだ本当の理由――「先輩の隣にいるための、私にもわかる口実が欲しかった」という切ない想いが垣間見える。

### 第2部：変数という名の「気持ち」（11〜20話）
S式ベースの言語開発がスタート。`['define', 'x', 10]` のような変数束縛を実装する中で、隆弘は「名前（変数名）に意味（値）を与える」という行為に、美久への特別な感情を無意識に重ね始める。しかし、実装が壁にぶつかり、隆弘が一人で解決しようと没頭してしまったことで、美久は「やっぱり私はお邪魔なだけ？」と距離を感じてしまう。初めてのすれ違いと和解を通じて、二人は「一緒に作ること」の意味を再確認する。

### 第3部：制御構造という「選択」（21〜30話）
`if`文による条件分岐を実装。プログラムが「選択」を学ぶように、二人も関係性の「選択」を迫られる。美久の友人から「嵐山先輩って、ちょっと変わってるよね」と言われたことをきっかけに、美久は隆弘のいる世界と自分のいる世界の差に悩み、隆弘もまた、自分の興味の偏りが美久を苦しめているのではないかと悩む。隆弘は、美久のために少しでも世間のことを知ろうと慣れない努力をし、美久は「先輩は先輩のままでいい」と伝える。二人は互いの世界の違いを認め、その上で一緒にいることを「選択」する。

### 第4部：関数という「対話」（31〜40話）
ユーザーが独自のルール（関数）を定義できる機能を実装。これは、二人が「二人だけの対話の言葉」を手に入れることを意味する。クロージャ（関数がそれを取り巻く環境を記憶する仕組み）を学ぶ中で、隆弘は、美久と過ごした過去の記憶が、今の自分の感情を形作っていることに気づく。美久もまた、隆弘が自分のために変わろうとしてくれたことを知り、彼への想いを確かなものにする。

### 第5部：不完全な言語、完全な想い（41〜50話）
言語は「MikuLang」と名付けられ、一応の完成を見る。しかし、それはバグも多く、機能も不十分な「不完全な」言語だった。発表会で、隆弘はその不完全さを正直に語る。「この言語は、僕一人では作れませんでした。僕の知らないこと、僕だけでは思いつけないことを、彼女が教えてくれた。このバグや不格好な仕様の一つ一つが、僕たちが対話し、悩んだ証です」。その言葉は、事実上の告白だった。美久は涙を浮かべてそれに応える。恋人同士になった二人が、MikuLangの次のバージョンについて楽しげに語り合う、新しい日常で物語は幕を閉じる。

## 技術的な要素
- **言語仕様**: S式（Lisp-like expression）を採用。`['operator', 'operand1', 'operand2']`
- **実装**: JavaScript (ES6+) を使用。
- **コア技術**:
  - **パーサー**: 文字列をASTに変換する部分も、物語の後半で簡易的に実装。
  - **AST（抽象構文木）**: 「言葉の設計図」として導入。
  - **評価器（Evaluator）**: ASTを実行する再帰関数。
  - **環境（Environment）**: 変数スコープを実現する仕組み。「記憶の箱」として説明。
  - **クロージャ**: 「記憶を持った関数」として、恋愛の文脈と絡めて解説。

## 恋愛要素
- 隆弘の不器用さ（興味の偏り）と、美久の不器用さ（コンプレックス）が共鳴し、惹かれ合う。
- 「教える／教えられる」という関係から、対等な「共同開発者」へと変化していく過程を描く。
- 技術的な問題の解決が、二人の心理的な障壁の克服とリンクする。
- 告白は、ストレートな言葉だけでなく、共同作業の成果物を通じて行われる。