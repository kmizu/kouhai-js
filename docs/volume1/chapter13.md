# 第13話「テキストボックスを書き換えろ！（DOM操作）」

　CSSの魔法で、僕たちのゲーム画面は、見違えるほど華やかになった。美久は、自分の描いたキャラクターが、イメージ通りのフォントと色でセリフを喋るのを見て、何度も「可愛い！」と歓声を上げている。その笑顔を見るたびに、僕の心も温かくなる。

「先輩、このセリフ、ゲームの進行に合わせて、JavaScriptで書き換えられるんですよね？」

　美久が、ふとそんな質問をしてきた。彼女の目は、すでに次のステップを見据えている。その探究心に、僕は感心した。

「もちろんできるぞ。それが、DOM操作だ」

　僕は、ホワイトボードに「DOM操作」と書いた。DOM（Document Object Model）とは、HTMLやXMLドキュメントを、プログラムから操作できるようにするための仕組みだ。ウェブページ上のあらゆる要素を、JavaScriptで自由自在に操ることができる。

「HTMLが建物の骨組みで、CSSが内装や外装だとしたら、DOM操作は、その建物の中にあるものを、動かしたり、入れ替えたりするようなものだ。例えば、壁に飾ってある絵を別の絵に変えたり、家具の配置を変えたり……」

　僕の例えに、美久は「なるほど！」と頷いた。彼女の頭の中では、もうすでに、ゲームのセリフが次々と書き換わっていく様子が描かれているのだろう。

「で、特定の要素をJavaScriptから操作するには、まずその要素を『見つける』必要がある。その時に使うのが、`getElementById`だ」

　僕は、簡単なHTMLのコードを打ち込んだ。セリフを表示するための`<p>`タグに、`id="message-box"`という識別子をつけた。そして、JavaScriptでその要素を取得し、中身を書き換えるコードを打ち込む。

`document.getElementById('message-box').textContent = 'こんにちは、世界！';`

　画面に表示されていた「セリフが入ります」という文字が、一瞬で「こんにちは、世界！」に書き換わる。美久は「わあ！」と歓声を上げた。その瞳は、まるで魔法を見たかのように輝いている。

「すごい！ これでゲームのセリフを自由に書き換えられるんだ！」

　美久は、興奮冷めやらぬ様子で、僕が書いたコードを食い入るように見つめている。彼女の言葉を聞いて、僕も改めて、この技術の持つ可能性に気づかされた。単に文字を書き換えるだけじゃない。これこそが、ノベルゲームの「物語」を動かす、根幹の技術なのだ。

「そう。プレイヤーの選択によって、セリフを変えたり、キャラクターの表情を変えたり、背景を切り替えたり……。全部、このDOM操作でできるんだ」

　僕たちは、実際に自分たちのゲームに、DOM操作を組み込んでみた。美久が考えたシナリオの冒頭部分をHTMLに書き込み、JavaScriptでセリフを一つずつ表示させていく。ボタンをクリックするたびに、テキストボックスの中身が次のセリフに切り替わる。たったそれだけの動作なのに、美久は「ゲームだ！ 本当にゲームになってる！」と、感動したように呟いた。

　その声を聞いて、僕の胸にも、じんわりと温かいものが広がっていく。僕一人でコードを書いていた時には感じられなかった、この喜び。美久の感動が、僕のプログラミングへの情熱を、さらに燃え上がらせる。

「先輩、これって、キャラクターの立ち絵も、背景も、全部JavaScriptで切り替えられるってことですよね？！」

　美久は、目を輝かせながら、次々と質問を投げかけてくる。その探究心は、まるで尽きることがない。僕は、その一つ一つに丁寧に答えながら、美久の成長を間近で見守る喜びを感じていた。

　プログラミングは、単なる技術じゃない。それは、僕たちの「想い」を、具体的な形にするための、強力なツールだ。DOM操作という、たった一つの概念を学ぶだけで、美久はこんなにも目を輝かせ、ゲーム制作が現実味を帯びてきたと感動している。その姿を見ていると、僕の胸にも、温かいものがこみ上げてきた。

　僕たちのノベルゲーム制作は、DOM操作という強力な武器を手に入れた。これで、よりダイナミックで、プレイヤーの感情に訴えかける物語を紡ぐことができるだろう。そして、僕たちの関係もまた、このDOM操作のように、お互いの心を、より深く、より自由に、書き換えていくのだろう。そんな予感が、僕の胸を、優しく、そして強く、締め付けた。

◇◇◇◇
