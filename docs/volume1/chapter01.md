# 第1話 無茶な願い

　四月二十日、土曜日。午後二時。

　僕の部屋のインターホンが鳴った。

「隆弘先輩、いますかー？」

　ドアの向こうから聞こえてきたのは、隣に住む幼馴染・河内美久の声だった。学校では後輩として接しているけど、家では昔からの呼び方に戻ることもある。今日みたいに。

「開いてるよ」

　僕がそう答えると、ガチャリとドアが開いて、美久が入ってきた。制服姿じゃない美久を見るのは久しぶりだ。薄いピンクのワンピースに、白いカーディガンを羽織っている。春らしい格好だった。

「お邪魔しまーす」

　美久は慣れた様子で部屋に上がり込むと、僕のデスクを覗き込んだ。三台のモニターには、びっしりとコードが表示されている。

「相変わらず、難しそうなことしてるね」

「型推論アルゴリズムの改良だよ。来月の学会発表に向けて準備してるんだ」

　僕がそう説明すると、美久は「ふーん」と興味なさそうに頷いた。いや、興味がないふりをしているだけかもしれない。美久はよくそういう顔をする。

「それより隆弘先輩、今日はお願いがあって来たの」

　美久が僕の椅子の隣に腰を下ろした。いつもより距離が近い気がする。ほのかにシャンプーの香りが漂ってきて、なんだか落ち着かない。

「お願い？」

「うん。実はね……」

　美久が上目遣いで僕を見つめてきた。その瞳には、何か決意のようなものが宿っている。

「プログラミング言語を作りたいの」

　僕は思わず手を止めた。

「……は？」

「プログラミング言語。作りたいの」

　美久は真剣な顔で繰り返した。冗談を言っているようには見えない。

（ちょっと待て。美久はプログラミングもできないはずだろ）

　僕の困惑を察したのか、美久は慌てて説明を始めた。

「あのね、この前、隆弘先輩の論文が載ってる雑誌を見たの。『高校生が査読付き国際会議で論文発表』って」

　ああ、あれか。去年、僕が発表した論文のことだ。教育用プログラミング言語の型安全性に関する研究だった。

「それで思ったの。私も隆弘先輩みたいに、何か凄いものを作ってみたいって」

　美久の頬がほんのり赤く染まっている。

「でも、プログラミングもできないのに、いきなり言語を作るなんて無理だよ」

「だから、教えて欲しいの」

　美久が身を乗り出してきた。顔が近い。近すぎる。

「隆弘先輩なら、きっと分かりやすく教えてくれるでしょ？　ね？　お願い」

　甘えるような声。上目遣いの瞳。これは……反則だ。

（美久のこういうところ、昔から変わらないな）

　小学生の頃から、美久は「お願い」が上手かった。断れたことがない。

「まずは普通のプログラミングから始めた方が——」

「やだ」

　美久があっさりと首を振った。

「普通のプログラミングなんて、他の人でも教えられるもん。私は隆弘先輩にしか教えられないことを学びたいの」

　その言葉に、僕の心臓が少し跳ねた。

（隆弘先輩にしか教えられないこと、か）

　確かに、高校生でプログラミング言語の実装を教えられる人間は、そう多くないだろう。いや、ほとんどいないはずだ。

「本気なの？」

「本気だよ」

　美久の瞳は真っ直ぐ僕を見つめている。嘘をついているようには見えない。

　僕は大きくため息をついた。

「分かった。でも、相当難しいよ？」

「大丈夫！　隆弘先輩が教えてくれるなら、きっと理解できる」

　美久が嬉しそうに微笑んだ。その笑顔を見ていると、なんだか僕まで嬉しくなってくる。

◇◇◇◇

「じゃあ、まずは基本的なことから説明するね」

　僕は新しいエディタを開いて、美久に見えるように画面を調整した。

「プログラミング言語って、そもそも何だと思う？」

「えっと……コンピュータに命令するための言葉？」

「うん、大体合ってる。でも、もう少し正確に言うと——」

　僕は説明を始めた。人間の言葉とコンピュータの言葉の違い。なぜプログラミング言語が必要なのか。どうやって動いているのか。

　美久は真剣な顔で聞いている。時々「へー」とか「そうなんだ」とか相槌を打ちながら。

「つまり、プログラミング言語を作るっていうのは、新しい言葉を作るようなものなんだ」

「新しい言葉……」

　美久が何か考え込むような表情を見せた。

「じゃあ、私と隆弘先輩だけの秘密の言葉も作れる？」

　突然の発言に、僕は言葉に詰まった。

「え？」

「冗談だよ」

　美久がいたずらっぽく笑う。でも、その頬は少し赤い。

（これは……からかわれてるのか？）

　美久のこういうところが、時々僕を混乱させる。本気なのか冗談なのか、判断がつかない。

「と、とにかく」

　僕は咳払いをして話を戻した。

「プログラミング言語を作るには、いくつかのステップがある。普通は構文解析から始めるんだけど……」

「構文解析？」

「文字列を意味のある構造に変換する処理のこと。でも、これは結構複雑だから、今回は違うアプローチを取ろうと思う」

　僕はホワイトボードを引っ張り出してきて、図を描き始めた。

「ASTって知ってる？」

「えーえすてぃー？」

「Abstract Syntax Tree。抽象構文木のことだよ」

　美久が首を傾げる。予想通りの反応だ。

「難しそう……」

「大丈夫。簡単に説明するから」

　僕は日本語の文章を例に出して説明を始めた。「美久はかわいい」という文を、主語・述語・形容詞に分解して、ツリー構造で表現する。

「ほら、こんな感じで文章を木の形で表現できるでしょ？」

「あ、分かりやすい！」

　美久が目を輝かせた。

「でも、なんで私を例に出すの？」

「え？　いや、たまたま思いついただけで……」

　僕は慌てて言い訳をした。確かに、なぜ美久を例に出したんだろう。他にもいくらでも例はあったはずなのに。

「ふーん？」

　美久がニヤニヤしながら僕を見ている。また、からかわれている気がする。

「それで、プログラミング言語でも同じように、コードを木構造で表現するんだ。これがAST」

　僕は話を続けた。1+2という簡単な式をASTで表現する方法。それをJavaScriptのオブジェクトで表す方法。

```javascript
const ast = {
  type: 'BinaryExpression',
  operator: '+',
  left: {
    type: 'NumberLiteral',
    value: 1
  },
  right: {
    type: 'NumberLiteral', 
    value: 2
  }
};
```

「へー、こんな風に表現するんだ」

　美久が画面を食い入るように見つめている。

「でも、これだけじゃまだ計算はできないよね？」

「そう。次は、このASTを実際に実行する部分を作る必要がある」

「実行する部分？」

「評価器っていうんだ。英語だとEvaluator」

　僕は新しいファイルを作って、簡単な評価器のコードを書き始めた。

```javascript
function evaluate(node) {
  if (node.type === 'NumberLiteral') {
    return node.value;
  }
  
  if (node.type === 'BinaryExpression') {
    const left = evaluate(node.left);
    const right = evaluate(node.right);
    
    switch (node.operator) {
      case '+':
        return left + right;
      case '-':
        return left - right;
      // 他の演算子も同様に...
    }
  }
}
```

「わあ、動いた！」

　実際に evaluate(ast) を実行して 3 が表示されると、美久が歓声を上げた。

「すごい！　本当に計算できてる！」

　美久の喜ぶ姿を見ていると、なんだか教えている僕まで嬉しくなってくる。

「これが、プログラミング言語の第一歩だよ」

「第一歩……」

　美久が呟いた。

「じゃあ、この先もずっと隆弘先輩と一緒に歩いていけるんだね」

　また、意味深な発言。僕の頬が熱くなるのを感じる。

「そ、それは……まあ、教える約束をしたから」

「うん。約束」

　美久が小指を差し出してきた。

「指切りしよ」

「え？　子供じゃないんだから」

「いいから」

　結局、僕は美久と小指を絡めることになった。柔らかくて、温かい感触。

「指切りげんまん、嘘ついたら針千本飲ーます」

　美久が昔ながらの歌を歌う。僕も小さく合わせた。

「指切った」

　美久が満足そうに微笑む。

「これで隆弘先輩は私から逃げられないね」

（逃げるつもりはないけど……）

　でも、なんだか捕まってしまった気分だ。美久の「お願い」に、またしても敗北した。

◇◇◇◇

　夕方、美久が帰った後、僕は一人で考えていた。

　プログラミング言語を作るのは、確かに難しい。でも、不可能じゃない。むしろ、基礎から丁寧に教えれば、いい勉強になるかもしれない。

　それに……

（美久があんなに真剣な顔をするなんて、珍しいな）

　いつもはもっと、ふわふわした感じなのに。今日の美久は、何か違った。

　僕は明日の準備を始めることにした。どうせ教えるなら、しっかり理解してもらいたい。美久が本当にプログラミング言語を作れるように。

　窓の外を見ると、隣の部屋——美久の部屋の明かりがついていた。

　きっと今頃、今日教えたことを復習しているんだろう。あるいは、プログラミング言語について調べているのかもしれない。

（頑張れよ、美久）

　心の中でそうつぶやいて、僕は自分の作業に戻った。

　まさかこの日が、僕と美久の関係を大きく変える第一歩になるなんて、この時の僕はまだ知らなかった。

　プログラミング言語を作る。

　その過程で、僕たちは新しい「言葉」を見つけることになる。

　コードではなく、もっと大切な何かを伝えるための——。