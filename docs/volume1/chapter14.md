# 第14話「選択肢をクリック！（イベントリスナー）」

　DOM操作を学んだ僕たちは、ゲームのセリフを自由自在に書き換えられるようになった。美久は、自分の書いたシナリオが、ボタン一つで次々と表示されていくことに、まるで魔法を見ているかのように目を輝かせている。その純粋な感動が、僕の心にも温かい光を灯した。

「先輩、これって、選択肢をクリックしたら、次のシナリオに進むようにできますよね？」

　美久が、僕の顔を覗き込むようにして尋ねてきた。彼女の目は、すでにゲームの完成形を思い描いているようだ。その探究心と、ゲームへの情熱に、僕は感心するばかりだ。

「もちろんできるぞ。それが、イベントリスナーの役割だ」

　僕は、ホワイトボードに「イベントリスナー」と書いた。イベントリスナーとは、ウェブページ上で起こる様々な「イベント」（例えば、ボタンがクリックされた、キーボードが押された、マウスが動いた、など）を監視し、そのイベントが発生した時に特定の処理を実行するための仕組みだ。

「ゲームで言えば、プレイヤーが選択肢のボタンをクリックする、っていうのが『イベント』だ。そのイベントが発生した時に、『次のシナリオを表示する』っていう処理を実行するように設定するのが、イベントリスナーだ」

　僕は、簡単な例を挙げて説明した。HTMLでボタンを作り、JavaScriptでそのボタンにイベントリスナーを設定する。`button.addEventListener('click', function() { ... });`。そして、ボタンがクリックされた時に、`console.log`でメッセージを表示するコードを打ち込んだ。

　美久は、僕の書いたコードを食い入るように見つめている。そして、僕がブラウザでボタンをクリックすると、コンソールに「ボタンがクリックされました！」というメッセージが表示された。美久は「わあ！」と歓声を上げた。

「すごい！ 私がクリックしたことが、ちゃんとプログラムに伝わってる！」

　美久は、何度もボタンをクリックしては、コンソールに表示されるメッセージを確認している。その姿は、まるで初めて言葉を交わす生き物と対話しているかのように、純粋な喜びと興奮に満ちていた。

「そう。これで、プレイヤーの操作に反応して、ゲームを動かすことができるようになる。つまり、本格的なノベルゲームの骨格が、これで完成するんだ」

　僕の言葉に、美久の目が大きく見開かれた。彼女は、ゆっくりと僕の方を向いた。その瞳には、感動と、そして、僕への感謝の気持ちが溢れているように見えた。

「先輩……！ 私、本当にゲームが作れるようになるんですね！」

　美久の声は、少し震えていた。その言葉を聞いて、僕の胸にも、じんわりと温かいものが広がっていく。僕が教えたプログラミングの知識が、美久の「夢」を形にする手助けになっている。その事実が、僕にとって何よりも嬉しいことだった。

　僕たちは、これまでに作ったセリフ表示の機能と、if文による分岐、そして今回のイベントリスナーを組み合わせて、簡単なノベルゲームのプロトタイプを完成させた。画面には、美久が描いたキャラクターの立ち絵と、セリフが表示されている。そして、その下に、二つの選択肢ボタン。

　美久が、震える指で「はい」のボタンをクリックした。すると、セリフが次のものに切り替わり、シナリオが先に進む。次に「いいえ」のボタンをクリックすると、別のセリフが表示され、シナリオが分岐する。たったそれだけの動作なのに、僕たちの胸には、大きな達成感がこみ上げてきた。

「先輩……！ これ、本当に私たちが作ったゲームなんですね……！」

　美久は、感動のあまり、瞳を潤ませていた。その姿を見て、僕もまた、胸が熱くなる。僕一人では、決して味わえなかっただろう、この喜び。美久と一緒だからこそ、感じられる、この特別な感情。

　プログラミングは、単なるコードの羅列じゃない。それは、僕たちの「想い」を、具体的な形にするための、そして、誰かと「喜び」を分かち合うための、最高のツールだ。イベントリスナーという、たった一つの概念を学ぶだけで、美久はこんなにも目を輝かせ、ゲーム制作の喜びを全身で表現している。その姿を見ていると、僕の胸にも、温かいものがこみ上げてきた。

　僕たちのノベルゲーム制作は、イベントリスナーという強力な武器を手に入れた。これで、プレイヤーの操作に反応する、本格的なゲームを創り出すことができるだろう。そして、僕たちの関係もまた、このイベントリスナーのように、お互いの「心」の動きに反応し、より深く、より甘く、結びついていくのだろう。そんな予感が、僕の胸を、優しく、そして強く、締め付けた。

◇◇◇◇
