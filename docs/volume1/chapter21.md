# 第21話 文化祭準備開始

　九月十日、火曜日。

　夏休みが終わり、二学期が始まって一週間。美久との関係も、恋人として新しいステージに入った。

「文化祭の準備、そろそろ始めないと」

　放課後のプログラミング部室。部長の田中先輩が切り出した。

「今年は何をするんですか？」

　美久が興味深そうに聞く。

「MikuLangを使ったゲーム展示はどうだろう」

　僕の提案に、部員たちが注目する。

◇◇◇◇

「MikuLangって、美久と作った言語？」

　副部長の佐藤先輩が確認する。

「はい。日本語でプログラミングできる言語です」

　美久が誇らしげに答える。

「面白そう！」

「初心者でも書けるの？」

　部員たちが興味を示す。

「デモを見せてもらえる？」

◇◇◇◇

　ホワイトボードにMikuLangのコードを書く。

```
ゲームを開始する

プレイヤーの名前を入力してもらう
「ようこそ、」とプレイヤーの名前と「さん」を表示する

質問リストを[
  "プログラミングは楽しい？",
  "MikuLangを使ってみたい？",
  "文化祭は好き？"
]に設定する

正解数を0に設定する

質問リストの各要素を質問として｛
  質問を表示する
  答えを入力してもらう
  
  もし 答えが「はい」なら
    正解数を1増やす
    「素晴らしい！」を表示する
  そうでなければ
    「そうですか...」を表示する
｝

もし 正解数が3なら
  「完璧です！あなたは真のプログラマー！」を表示する
そうでなければ 正解数が2以上なら
  「いい感じです！」を表示する
そうでなければ
  「プログラミングの楽しさを知ってください」を表示する
```

◇◇◇◇

「本当に日本語だ！」

　1年生の新入部員が驚く。

「これなら僕でも書けそう」

「変数も日本語なんだ」

　部員たちの反応が良い。

「これを使って、どんなゲームを作る？」

　田中先輩が本題に入る。

◇◇◇◇

「恋愛シミュレーションはどうですか？」

　美久が提案する。

「プログラミング部が舞台の」

　僕も補足する。

「いいね！来場者が主人公になって、部員たちと交流する」

「プログラミングを学びながら恋愛もできる」

　アイデアがどんどん出てくる。

◇◇◇◇

　企画書を作り始める。

```
タイトル：「プログラミング部の恋」
ジャンル：恋愛シミュレーション＋教育
使用言語：MikuLang
プレイ時間：約15分

ストーリー：
主人公は文化祭でプログラミング部を訪れる。
そこで出会った部員たちと交流しながら、
プログラミングの基礎を学んでいく。
選択肢によって、誰と仲良くなるかが変わる。

キャラクター：
- 優しい先輩（プログラミング上級者）
- 元気な同級生（プログラミング初心者）
- クールな後輩（プログラミング中級者）
```

◇◇◇◇

「役割分担を決めよう」

　田中先輩が仕切る。

- シナリオ：美久、山田
- プログラミング：隆弘、佐藤
- イラスト：美久、鈴木
- 音楽：フリー素材
- テスト：全員

「美久、イラストとシナリオ両方やれる？」

「頑張ります！」

　美久の意欲的な返事が嬉しい。

◇◇◇◇

　作業を始める。まず、基本システムを作る。

```javascript
// MikuLangで書くゲームエンジン
const gameEngineCode = `
  // ゲームの状態管理
  現在のシーンを"タイトル"に設定する
  選択履歴を[]に設定する
  キャラクター好感度を{
    先輩: 0,
    同級生: 0,
    後輩: 0
  }に設定する
  
  // シーン遷移関数
  シーンを切り替える関数を定義する（次のシーン）｛
    現在のシーンを次のシーンに設定する
    シーンを表示する（）
  ｝
  
  // 好感度を上げる関数
  好感度を上げる関数を定義する（キャラ、ポイント）｛
    キャラクター好感度[キャラ]をポイント増やす
    キャラと「の好感度が」とポイントと「上がった！」を表示する
  ｝
  
  // 選択肢を表示する関数
  選択肢を表示する関数を定義する（選択肢リスト）｛
    番号を1に設定する
    選択肢リストの各要素を選択肢として｛
      番号と「: 」と選択肢.テキストを表示する
      番号を1増やす
    ｝
    
    選択を入力してもらう
    選ばれた選択肢を選択肢リスト[選択-1]に設定する
    選ばれた選択肢.効果（）
  ｝
`;
```

◇◇◇◇

　休憩時間。美久と二人きりになった。

「楽しそうだね」

「うん。みんなでゲーム作るの、初めて」

「MikuLangが役に立ってよかった」

「隆弘先輩と作った言語だから」

　美久が嬉しそうに言う。

◇◇◇◇

「シナリオのアイデアある？」

　美久がノートを開く。

「実体験を基にしたら？」

「え？」

「プログラミングを教わって、恋に落ちる話」

　僕の提案に、美久の顔が赤くなる。

「それって、私たちの話？」

「参考程度に」

◇◇◇◇

　作業を再開する。シーンのデータ構造を設計。

```javascript
// シーンデータの構造（MikuLang）
const scenarioData = `
  シーンデータを{
    オープニング: {
      背景: "部室.jpg",
      テキスト: "文化祭で賑わう校内。あなたはプログラミング部の展示を見つけた。",
      選択肢: [
        {
          テキスト: "入ってみる",
          効果: 関数（）{ シーンを切り替える（"部室到着"） }
        },
        {
          テキスト: "やめておく",
          効果: 関数（）{ シーンを切り替える（"バッドエンド"） }
        }
      ]
    },
    
    部室到着: {
      背景: "部室内.jpg",
      テキスト: "部室に入ると、3人の部員が出迎えてくれた。",
      選択肢: [
        {
          テキスト: "優しそうな先輩に話しかける",
          効果: 関数（）{ 
            好感度を上げる（"先輩", 10）
            シーンを切り替える（"先輩ルート1"）
          }
        },
        {
          テキスト: "元気な同級生に話しかける",
          効果: 関数（）{ 
            好感度を上げる（"同級生", 10）
            シーンを切り替える（"同級生ルート1"）
          }
        },
        {
          テキスト: "クールな後輩に話しかける",
          効果: 関数（）{ 
            好感度を上げる（"後輩", 10）
            シーンを切り替える（"後輩ルート1"）
          }
        }
      ]
    }
  }に設定する
`;
```

◇◇◇◇

　夕方になってきた。今日の進捗を確認する。

「基本システムはできた」

「シナリオの骨組みも」

「イラストのラフも描いた」

　美久がスケッチを見せる。可愛いキャラクターたち。

「文化祭まであと一ヶ月」

　田中先輩がカレンダーを確認する。

「間に合うよね？」

　不安そうな声も出る。

「大丈夫。みんなで協力すれば」

◇◇◇◇

　部活が終わり、美久と二人で帰る。

「初めての共同制作だね」

「そうだね。でも、MikuLangは二人で作った」

「あれは特別」

　美久が恥ずかしそうに言う。

「今回のも特別になるよ」

「そうかな」

「みんなの思いが詰まったゲームだから」

◇◇◇◇

　マンションに着いて、エレベーターで7階へ。

「明日も頑張ろうね」

「うん」

　部屋に入る前に、美久が振り返った。

「隆弘先輩」

「ん？」

「みんなでゲーム作るのも楽しいけど」

「けど？」

「二人で作るのが、一番楽しい」

　その言葉が嬉しくて、思わず美久を抱きしめた。

「僕もだよ」

　文化祭のゲームが完成したら、また二人だけのプロジェクトを始めよう。

　そう心に決めた。