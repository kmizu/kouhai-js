# 第3話 最初の一歩：数字を表示しよう

　四月二十二日、月曜日。放課後。

　僕は情報処理室で美久を待っていた。今日から本格的にプログラミング言語の実装に入る予定だ。

「隆弘先輩、お待たせ！」

　美久が駆け込んできた。今日も制服姿だけど、なんだか昨日より表情が明るい。

「走らなくてもいいよ」

「だって、楽しみで」

　美久が僕の隣に座る。また近い。もうこの距離感に慣れるしかないのかもしれない。

「昨日の復習、してきた？」

「もちろん！」

　美久がノートを広げる。昨日教えたASTの概念が、カラフルなペンで丁寧にまとめられている。

「すごいね。美術の授業みたい」

「えへへ。分かりやすくしたくて」

　ノートには、ASTの木構造が実際の木のイラストで描かれていた。葉っぱが数値、枝が演算子。なるほど、視覚的に理解しているんだ。

「じゃあ、今日は実際にコードを書いていこう」

「はい！」

　僕は新しいファイルを作成した。

```javascript
// miku-lang.js
console.log("MikuLang インタープリタ v0.0.1");
```

「わあ、私の名前！」

　美久が嬉しそうに声を上げる。

「昨日、言語の名前はMikuLangにするって決めたでしょ」

「覚えててくれたんだ……」

　美久の頬がほんのり赤く染まる。

（そりゃ、覚えてるよ）

　僕は続けてコードを書き始めた。

「まずは、一番簡単なことから始めよう。数字を表示するだけのプログラム」

「数字を表示？」

「うん。プログラミング言語として最小限の機能」

　僕は説明しながらコードを書いていく。

```javascript
// 数値リテラルのAST
const numberNode = {
  type: 'NumberLiteral',
  value: 42
};

// 評価関数
function evaluate(node) {
  if (node.type === 'NumberLiteral') {
    return node.value;
  }
  
  throw new Error(`Unknown node type: ${node.type}`);
}

// 実行
const result = evaluate(numberNode);
console.log(result); // 42
```

「動いた！」

　美久が歓声を上げる。

「でも、これだけ？」

「これだけ。でも、これがすべての始まり」

　僕は美久に向き直った。

「どんなに複雑なプログラムも、結局は小さな部品の組み合わせなんだ」

「小さな部品……」

　美久が考え込む。

「あ、レゴブロックみたい？」

「まさにその通り」

　美久の例えの上手さに、また感心する。

◇◇◇◇

「ねえ、隆弘先輩」

　コードを見つめていた美久が、ふと顔を上げた。

「なんで42なの？」

「え？」

「さっきのvalue: 42って。なんで42？」

　鋭い質問だ。普通は気にしないところに気づくのが美久らしい。

「実は、プログラマーの間では有名な数字なんだ」

「有名？」

「『銀河ヒッチハイク・ガイド』っていうSF小説でね、『生命、宇宙、そして万物についての究極の疑問の答え』が42だって」

　美久が目を丸くする。

「なにそれ、深い！」

「深いというか、ジョークなんだけどね」

　僕は苦笑した。

「でも、プログラミングの世界では、こういう小ネタが文化として根付いてるんだ」

「へー。じゃあ、私も何か入れたい！」

　美久が目を輝かせる。

「何がいい？」

「うーん……」

　美久が考え込む。その真剣な表情が、なんだか可愛い。

（って、何考えてるんだ、僕は）

「あ、316！」

「316？」

「3月16日。隆弘先輩の誕生日」

　僕は言葉を失った。

（覚えてたのか……）

「だ、だめ？」

　美久が上目遣いで見てくる。

「いや、別にいいけど……」

　僕は照れ隠しに、コードを修正した。

```javascript
const numberNode = {
  type: 'NumberLiteral',
  value: 316
};
```

「やった！」

　美久が小さくガッツポーズをする。

◇◇◇◇

「次は、もう少し複雑にしてみよう」

　僕は新しいコードを書き始めた。

「さっきは数値だけだったけど、今度は文字列も扱えるようにする」

```javascript
// 文字列リテラルのAST
const stringNode = {
  type: 'StringLiteral',
  value: 'Hello, MikuLang!'
};

// 評価関数を拡張
function evaluate(node) {
  if (node.type === 'NumberLiteral') {
    return node.value;
  }
  
  if (node.type === 'StringLiteral') {
    return node.value;
  }
  
  throw new Error(`Unknown node type: ${node.type}`);
}
```

「あ、if文が増えた！」

「そう。新しい種類のノードを扱うたびに、条件分岐を増やしていく」

「なるほど。さっきのレゴブロックの話みたい」

　美久の理解の速さに驚く。プログラミング未経験とは思えない。

「美久、もしかして本当は経験者？」

「ううん、本当に初めて」

　美久が首を振る。

「でも、隆弘先輩の説明が分かりやすいから」

　そう言って、美久は僕を見つめた。

（また、その眼差し……）

　なんだか照れくさくなって、僕は視線を逸らした。

「それより、実際に動かしてみよう」

```javascript
console.log(evaluate(stringNode)); // Hello, MikuLang!
```

「わあ、文字も表示できた！」

　美久の喜ぶ姿を見ていると、こちらまで嬉しくなる。

◇◇◇◇

「隆弘先輩」

　休憩中、美久が窓の外を眺めながらつぶやいた。

「ん？」

「プログラミング言語を作るって、思ってたより地道なんだね」

「がっかりした？」

「ううん、逆」

　美久が振り返る。夕日が彼女の髪を金色に染めている。

「一つ一つ積み重ねていくのが、なんだか……」

　美久が何か言いかけて、止まる。頬が少し赤い。

「なんだか？」

「……達成感がありそう」

　明らかに違うことを言おうとしていた気がする。でも、美久はすぐに笑顔を作った。

「小さいことから始めるって、大事なんだね」

「そうだね。いきなり大きなものは作れないから」

　僕も美久の話題転換に乗ることにした。

「次は何を作るの？」

「そうだな……」

　僕も気持ちを切り替えて、説明を続けた。

「今度は、プログラムを実行する仕組みを作ろう」

「実行する仕組み？」

「さっきまでは、直接evaluateを呼んでたけど、もっと本格的なインタープリタにする」

　僕は新しい関数を書き始めた。

```javascript
// インタープリタのメイン関数
function interpret(ast) {
  try {
    const result = evaluate(ast);
    console.log('=> ' + result);
    return result;
  } catch (error) {
    console.error('Error:', error.message);
    return null;
  }
}
```

「tryとcatchって？」

「エラーが起きた時の処理。プログラムが急に止まらないようにする」

「優しい設計だね」

　美久の言葉に、僕は少し驚いた。

「優しい？」

「だって、失敗しても大丈夫なようにしてるんでしょ？」

（そういう見方もあるのか）

　技術的な観点しか考えていなかった僕には、新鮮な視点だった。

「確かに、そうかもしれない」

「隆弘先輩らしい」

　美久が微笑む。

「私も、そんな優しいプログラムが書けるようになりたいな」

◇◇◇◇

　気がつけば、もう六時を過ぎていた。

「今日はここまでにしよう」

「えー、もうちょっと」

　美久が名残惜しそうに言う。

「明日も学校でしょ」

「そうだけど……」

　美久がファイルを保存しながら、ぽつりとつぶやいた。

「プログラミングって、思ってたより楽しい」

「そう？」

「うん。特に……」

　美久が言いかけて、止まる。

「特に？」

「……隆弘先輩と一緒だから」

　小さな声だったけど、はっきりと聞こえた。

（美久……）

　僕の頬が熱くなる。どう返事をすればいいのか分からない。

「じゃ、じゃあ、明日は真偽値も実装しよう」

　僕は慌てて話題を変えた。

「真偽値？」

「trueとfalseのこと。これがあると、もっと複雑なプログラムが書けるようになる」

「楽しみ！」

　美久が立ち上がる。

「隆弘先輩、今日もありがとう」

「いや、僕も楽しかった」

　正直な気持ちだった。美久と一緒にコードを書いている時間は、研究とはまた違った楽しさがある。

「本当？」

「本当」

　美久の顔が、ぱっと明るくなった。

「じゃあ、明日も楽しみだね」

「うん」

　二人で情報処理室を出る。廊下には、もう誰もいない。

「送っていこうか？」

「大丈夫。すぐ隣だから」

　確かに、僕たちの家は隣同士だ。でも、なんとなく一緒に帰りたい気分だった。

「じゃあ、また明日」

「うん。また明日」

　美久が手を振って、先に歩いていく。その後ろ姿を見送りながら、僕は今日のことを振り返っていた。

　数字を表示するだけの、本当に簡単なプログラム。

　でも、美久の喜ぶ顔を見ていたら、それだけで十分な気がした。

（明日は、もっと喜んでもらえるかな）

　そんなことを考えながら、僕も帰路についた。

　空には、春の星座が輝き始めていた。

　プログラミング言語MikuLangは、まだ生まれたばかり。

　でも、確実に成長している。

　美久との関係も、きっと——。