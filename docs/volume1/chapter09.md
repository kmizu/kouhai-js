# 第9話 シナリオ型ゲームの美学

## 10月12日（水）午前7時25分

「隆弘くん、昨日のゲーム、家でも動かしてみたよ！」

朝のエレベーターで、美久が興奮気味に報告してくる。

「え、もうHTML書けるようになったの？」

「ううん、隆弘くんのコードをコピーして、ちょっとテキストを変えただけ」

嬉しそうに話す美久。その向上心に感心する。

「でね、思ったんだけど、最近のゲームって好感度だけじゃないよね」

「というと？」

「シナリオ型っていうか、重要な選択肢を選ばないとルートに入れないタイプ」

美久の指摘に、僕は思わず唸った。

（さすがゲーマー、よく分かってる）

◇◇◇◇

## 午後4時45分　プログラミング部室

「今日は、フラグ管理について話そう」

僕はホワイトボードに「フラグ」と大きく書いた。

「フラグ？」

「ゲームでよくある『特定の条件を満たしたかどうか』を記録する仕組みだよ」

美久の目が輝く。

「あ！『図書室で本を読んだ』とか『特定のアイテムを持っている』とか！」

「そう。それがないと攻略できないキャラとかいるよね」

```javascript
// フラグ管理
let flags = {
    metInLibrary: false,      // 図書室で会った
    gavePresent: false,       // プレゼントを渡した
    confessedFeelings: false, // 気持ちを伝えた
    secretRevealed: false     // 秘密を知った
};

// フラグを立てる関数
function setFlag(flagName, value) {
    flags[flagName] = value;
    console.log(`フラグ「${flagName}」が${value}になりました`);
}
```

「なるほど！これで複雑な分岐が作れるんですね」

美久が理解の早さを見せる。

「例えば、こんな感じで使う」

```javascript
function checkRoute() {
    // 真ルートの条件
    if (flags.metInLibrary && flags.gavePresent && affection.senpai >= 70) {
        console.log("真ルート解放！");
        return "true_route";
    }
    // ノーマルルートの条件
    else if (affection.senpai >= 50) {
        console.log("ノーマルルート");
        return "normal_route";
    }
    // バッドエンド
    else {
        console.log("バッドエンド...");
        return "bad_end";
    }
}
```

「わあ！本当にゲームみたい！」

美久が身を乗り出す。

「最近のギャルゲーは、こういうシナリオ型が主流なんだ」

僕は熱く語り始めた。

「単純に好感度を上げるだけじゃダメで、重要なイベントを見逃すと攻略できない」

「乙女ゲーも同じ！」

美久も負けじと語る。

「特定のフラグを立てないと、告白イベントすら発生しないキャラとかいるし」

「分かる！初見じゃ絶対無理なやつ」

「攻略サイト必須ですよね」

ゲーム談義に花が咲く。

◇◇◇◇

## 午後5時30分　実装作業

「じゃあ、実際にフラグシステムを組み込んでみよう」

僕たちは昨日作ったゲームに、フラグ機能を追加していく。

```javascript
// シーンデータに条件を追加
const scenes = [
    {
        id: 10,
        background: "library.jpg",
        character: "senpai_normal.png",
        text: "図書室で先輩と出会った。",
        choices: [
            { 
                text: "声をかける", 
                next: 11,
                action: () => {
                    setFlag("metInLibrary", true);
                    affection.senpai += 10;
                }
            },
            { 
                text: "そっと見守る", 
                next: 12,
                action: () => {
                    affection.senpai += 5;
                }
            }
        ]
    }
];
```

「選択肢にアクション機能を追加したんだ」

「これで、選んだ時にフラグが立つんですね！」

美久が嬉しそうに言う。

「そう。で、後のシーンでこのフラグをチェックする」

```javascript
// 条件分岐のあるシーン
{
    id: 50,
    condition: () => flags.metInLibrary && affection.senpai >= 60,
    background: "rooftop_sunset.jpg",
    character: "senpai_smile.png",
    text: "先輩が優しく微笑んだ。「あの時、声をかけてくれて嬉しかった」",
    choices: [
        { text: "私も嬉しかった", next: 51 }
    ]
}
```

「条件を満たさないと、このシーンは表示されない」

「まさに隠しルート！」

美久の興奮が伝わってくる。

◇◇◇◇

## 午後6時30分　デバッグ作業

「あれ？このルート、入れない……」

美久が困った顔をしている。

「どれどれ」

画面を覗き込むと、確かに真ルートに入れない。

「console.logで確認してみよう」

```javascript
console.log("現在のフラグ状態:", flags);
console.log("先輩の好感度:", affection.senpai);
```

「あ！図書室のフラグが立ってない！」

「最初の選択肢で違う方を選んだからか」

二人でデバッグしながら、ゲームの流れを確認する。

「これ、プレイヤーは気づかないですよね」

「だから攻略情報が必要になるんだ」

「でも、それがまた楽しいんですよね」

美久の言葉に同意する。

隠された真実を探し出す楽しさ。それもゲームの醍醐味だ。

◇◇◇◇

## 午後7時30分　今日の成果

「フラグシステム、完成！」

画面には、複雑な分岐を持つゲームが動いている。

選択によって変わる未来。

見逃したら二度と入れないルート。

まさに、僕たちが愛するゲームの形だ。

「隆弘先輩、これすごいです」

美久が感動した声で言う。

「本当のゲームみたい」

「だって、本当のゲームだから」

僕の言葉に、美久は嬉しそうに微笑んだ。

「私たちが作った、本当のゲーム……」

その呟きには、誇りと喜びが溢れていた。

◇◇◇◇

## 午後8時30分　帰り道

「今日もありがとうございました」

マンションへの道を歩きながら、美久が言う。

「シナリオ型ゲームの仕組みが分かって、すごく勉強になりました」

「美久の理解が早くて助かるよ」

「だって、大好きなゲームの仕組みだから」

素直な言葉に、胸が温かくなる。

「ねえ、隆弘先輩」

「ん？」

「現実にもフラグってあると思いますか？」

突然の質問に、少し考える。

「あると思う。気づかないうちに、大切な分岐点を通り過ぎてるかも」

「じゃあ、今も？」

美久が立ち止まって、僕を見上げる。

月明かりに照らされた彼女の瞳が、何かを期待しているように見えた。

「今も、きっと」

僕の答えに、美久は優しく微笑んだ。

「大切なフラグ、見逃さないようにしないとね」

その言葉の意味を考えながら、僕たちは再び歩き始めた。

もしかしたら、今この瞬間も、僕たちの未来を決める重要なフラグが立っているのかもしれない。

それを見逃さないように。

大切な選択肢を、間違えないように。

そんなことを思いながら、僕は美久の横顔を見つめた。