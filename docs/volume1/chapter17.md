# 第17話 深夜のデバッグ作業

## 10月25日（水）午後11時

『隆弘くん、大変！』

LINEが来たのは、もう寝ようかと思っていた頃だった。

『どうした？』

『ゲームが動かなくなっちゃった……』

慌てた様子が文面から伝わってくる。

『今から見に行くよ』

『え、でももう遅いし……』

『大丈夫。すぐ行く』

私は急いで着替えて、708号室へ向かった。

◇◇◇◇

## 午後11時15分　隆弘の部屋

「ごめんね、こんな時間に」

ドアを開けた隆弘くんは、まだ起きていたみたい。

パソコンの前には、飲みかけのコーヒー。

「全然。それより、どうしたの？」

「これ見て」

私のノートPCを開いて、ゲームを起動してみせる。

最初の画面は表示されるけど、選択肢をクリックしても何も反応しない。

「さっきまで動いてたのに……」

泣きそうな声になってしまう。

「大丈夫、一緒に直そう」

隆弘くんの優しい声に、少し落ち着いた。

◇◇◇◇

## 午後11時30分　エラーの確認

「まず、開発者ツールでエラーを確認してみよう」

隆弘くんがF12キーを押して、コンソールを開く。

```
Uncaught TypeError: Cannot read property 'addEventListener' of null
    at game.js:45
    at game.js:102
```

「これだ。要素が見つからないエラー」

「要素が見つからない？」

「HTMLの要素を取得しようとしたけど、まだ存在しないってこと」

隆弘くんがコードを確認し始める。

その真剣な横顔を見ていると、不安が少し和らぐ。

◇◇◇◇

## 深夜0時　原因の特定

「あった！」

```javascript
// 問題のコード
const startButton = document.getElementById('start-button');
startButton.addEventListener('click', startGame);

// HTMLはこうなっていた
<button id="startButton">ゲームスタート</button>
```

「IDが違ってる！」

「start-buttonじゃなくて、startButtonになってる」

私のミスだった。

HTMLを修正した時に、IDを変えてしまったみたい。

「ごめんなさい、私のせいで……」

「謝らないで。こういうのはよくあることだから」

隆弘くんが優しく微笑む。

◇◇◇◇

## 深夜0時30分　デバッグの続き

「せっかくだから、他にもバグがないか確認しよう」

隆弘くんが提案する。

```javascript
// デバッグ用のログを追加
console.log('ゲーム開始');
console.log('現在のシーン:', currentScene);
console.log('選択肢:', choices);

// エラーハンドリングも追加
try {
    displayScene(currentScene);
} catch (error) {
    console.error('シーン表示エラー:', error);
    alert('エラーが発生しました。ページを更新してください。');
}
```

「こうしておけば、問題が起きてもすぐ分かる」

「なるほど！」

隆弘くんの隣で、一つ一つ理解していく。

肩が触れそうな距離。

ドキドキするけど、今は集中しなきゃ。

◇◇◇◇

## 深夜1時　新たな問題

「あれ？このルート、おかしくない？」

隆弘くんが気づいた。

ゆいルートに入るはずが、さくらルートに飛んでしまう。

「条件分岐を確認してみよう」

```javascript
// バグのあるコード
if (affection.yui > affection.miku && affection.yui > affection.sakura) {
    changeRoute('yui');
} else if (affection.sakura > affection.miku && affection.sakura > affection.yui) {
    changeRoute('sakura');
} else {
    changeRoute('miku');
}
```

「あ！同点の時の処理がない」

「そう。好感度が同じ時の優先順位を決めてないんだ」

私たち、二人で見つめ合う。

まるで、私たちの関係みたい。

どっちが先に好きになったとか、関係ないのに。

◇◇◇◇

## 深夜1時30分　修正作業

```javascript
// 修正後のコード
function determineRoute() {
    const routes = [
        { name: 'miku', points: affection.miku },
        { name: 'yui', points: affection.yui },
        { name: 'sakura', points: affection.sakura }
    ];
    
    // 好感度でソート（同点の場合は配列の順番を維持）
    routes.sort((a, b) => b.points - a.points);
    
    // 最高好感度のキャラのルートへ
    changeRoute(routes[0].name);
}
```

「これで完璧」

隆弘くんが満足そうに頷く。

「すごい……配列とソート、こんな風に使えるんだ」

「美久も随分詳しくなったね」

褒められて嬉しい。

でも、それ以上に嬉しいのは、一緒に問題を解決できたこと。

◇◇◇◇

## 深夜2時　コーヒーブレイク

「ちょっと休憩しよう」

隆弘くんが新しいコーヒーを入れてくれる。

「ごめんね、こんな遅くまで」

「いいよ。楽しいし」

「楽しい？」

「うん。美久と一緒にデバッグするの、楽しい」

その言葉に、胸が温かくなる。

「私も。隆弘くんといると、難しいことも楽しく感じる」

二人でコーヒーを飲みながら、静かな時間を過ごす。

深夜の、特別な時間。

◇◇◇◇

## 深夜2時30分　最後の仕上げ

「もう少しで完成だね」

画面には、バグが修正されたゲームが動いている。

選択肢も正しく動作し、ルート分岐も完璧。

「隆弘くんのおかげ」

「美久が頑張ったからだよ」

ふと、時計を見る。

もうこんな時間。

「帰らなきゃ」

立ち上がろうとした時、隆弘くんが言った。

「美久」

「なに？」

「今日みたいに、これからも一緒に問題を解決していきたい」

真剣な眼差し。

「プログラミングだけじゃなくて、いろんなことを」

私の心臓が、早鐘を打つ。

「私も……隆弘くんと一緒なら、どんな問題も乗り越えられる気がする」

◇◇◇◇

## 深夜3時　別れ際

部屋を出る前に、隆弘くんが言った。

「明日……いや、もう今日か。ちゃんと寝てね」

「隆弘くんも」

ドアの前で、少し躊躇う。

何か言いたいことがあるような、そんな雰囲気。

「美久」

「うん？」

「ありがとう。こんな時間でも、頼ってくれて」

その言葉に、涙が出そうになった。

「私の方こそ、ありがとう」

そして、勇気を出して。

「隆弘くん」

「ん？」

私は一歩近づいて、隆弘くんの頬に軽くキスをした。

「お礼」

そう言って、慌てて自分の部屋に戻る。

ドアを閉めて、背中にもたれかかる。

（やっちゃった……）

でも、後悔はない。

隆弘くんとなら、どんなバグも、どんな問題も、一緒に解決していける。

プログラミングも、恋も、きっと。

スマホが震えた。

『おやすみ、美久。いい夢を』

そして、もう一通。

『さっきのお礼、嬉しかった』

顔が真っ赤になる。

でも、幸せ。

『おやすみなさい、隆弘くん』

『また明日』

深夜のデバッグは、私たちの距離を確実に縮めてくれた。

エラーを直すように、お互いの気持ちの行き違いも、きっと解決できる。

そう信じて、眠りについた。