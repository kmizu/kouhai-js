# 第17話 終わらないループと、終わってほしくない時間

　頭を撫でられた、あの事件から数日。僕と美久の間には、まだ少しだけ、甘酸っぱいような、ぎこちない空気が漂っていた。
　僕は、その照れ臭さを振り払うように、少しだけ早口で、新しいテーマを切り出した。

「きょ、今日は、プログラミングの真髄とも言える機能、『繰り返し』を実装するぞ！」
「繰り返し、ですか？」
「ああ。`while`ループだ。『ある条件が満たされている間、ずっと同じ処理を繰り返す』。これができると、人間がやったら何時間もかかるような作業を、コンピュータに一瞬でやらせることができるようになるんだ」

　僕は、新しい構文`['while', condition, body]`をエディタに書き出した。

「`condition`が`true`である限り、`body`の処理を、何度も、何度も、実行し続ける。そういう『お願い』だ」

　実装は、`if`文の応用だった。`evaluate`関数に`while`の分岐を追加し、条件式を評価し、その結果が`true`なら`body`を評価する。そして、`if`文と違うのは、`body`を評価し終わったら、また最初に戻って、もう一度、条件式を評価するところだ。

「例えば、こんなコードだ」

　僕は、デモ用のコードを書いてみせた。

```javascript
['begin',
  ['define', 'x', 0],
  ['while', ['<', 'x', 5],
    ['begin',
      ['define', 'x', ['+', 'x', 1]],
      // console.log(x) のような表示機能はまだない
    ]
  ],
  'x' // 最終的なxの値を返す
]
```

「このコードを実行すると、`x`の値が0から1、2、3、4と変化していって、最終的に`5`が返ってくる。一瞬で、5回の足し算をやってのけるんだ」
「すごい……！　自動で計算してくれるんですね！」

　美久が感心したように声を上げる。僕は、少しだけ意地悪な笑みを浮かべて、次のコードを見せた。

`['while', true, ['define', 'x', ['+', 'x', 1]]]`

「じゃあ、これはどうなると思う？」
「え？　`true`ってことは……条件が、ずっと`true`……？　あ……！」

　美久が気づいた瞬間、僕はプログラムを実行した。案の定、プログラムは応答しなくなり、ブラウザのタブがフリーズする。僕は慌ててタブを閉じた。

「こ、こわい……！　暴走しちゃった……」
「そう。これが『無限ループ』だ。だから、`while`ループを使う時は、いつか必ずループが『終わる』ように、ちゃんと設計してあげないといけないんだ」

　僕がその危険性と重要性を説いている間、美久は、どこか遠くを見つめていた。

（終わらないループ……）

　彼女の頭の中は、別のことでいっぱいだった。

（先輩とこうして過ごす、この時間。この時間が、もし、`while (true)`だったら、いいのに……）

　この、楽しくて、少しだけ胸が苦しくなる、放課後の開発作業。でも、これには、必ず「終わり」が来る。言語が、完成した時に。
　その事実に、彼女は、今更ながら気づいてしまったのだ。

「……先輩」

　ぽつり、と彼女が呟いた。その声は、いつもの快活さが嘘のように、少しだけ、か細かった。

「この言語が、もし、完成したら……。この、放課後の勉強会も、終わっちゃう、んですよね？」

　その質問は、僕の完全に意表を突くものだった。
　終わり？　考えたこともなかった。美久とこうして過ごす時間が、僕にとっても、いつの間にか、かけがえのない、大切な日常になっていたから。

　僕は、うまく言葉を返すことができなかった。

「……それは、まあ……そう、だな」

　肯定するのが、精一杯だった。
　教室に、少しだけ切ない沈黙が流れる。「終わり」を意識させる`while`ループが、皮肉にも、僕たち二人に、この特別な時間の「終わり」を、はっきりと意識させてしまった。

　僕たちのこの心地よいループは、一体、どんな「条件」を満たした時に、終わりを迎えてしまうのだろうか。そんな、新たな不安と感傷の気配が、夕暮れの教室に、静かに漂い始めていた。